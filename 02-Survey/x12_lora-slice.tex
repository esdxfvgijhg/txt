\subsection{Adaptive dynamic slicing}

 % \begin{frame}{Utility Function}{Related work}
	%  \begin{equation}
	% 	\begin{array} { l l } 
	% 	M            & the set of LoRa Gateways} \\
	% 	K            & the set of LoRa Devices} \\
	% 	L            & the set of Slices} \\
	% 	K_{l}        & the set of devices associated to slice l} \\
	% 	\sigma_{j}   & the set of packets with S F = j } \\ 
	% 	f_{k,l,m}    & virtual flow for device k in slice l through GW } \\ 
	% 	U_{k,l,m}    & utility for device k in slice l on GW m } \\ 
	% 	sp_{l}       & slice priority of slice l } \\ 
	% 	b_{l,m}      & baximum transmission power of GW m } \\ 
	% 	e^{\xi},m    & power gain between a GW m and a device k } \\ 
	% 	\alpha_{k,l} & lognormal shadowing component } \\ 
	% 	\alpha_{k,l} & association index of device k to slice  l } \\ 
	% 	\beta_{k,m}  & association index of device k to GW } m_{h} \\ 
	% 	u_{k}        & urgency factor for device k } \\
	% 	d_{k}        & instant packet delay for device k} \\
	% 	PDR          & packet delay budget for device k} \\
	% 	\end{array}
	% \end{equation}
 % \end{frame}

 % \begin{frame}{Notations}{Related work}
 % 	\Columns{.6}{.4}{
	% 	\begin{tabular}{ll} \\
	% 	\multicolumn{2}{l}{\textbf{Set of devices, slices, gateways and flows}}\\
	% 	G              & set of LoRa Gateways \\
	% 	S              & set of Slices \\
	% 	$D_{s}$        & cluster of devices associated to slice s \\
	% 	% $F_{d,s,g}$    & subset of packets from device d in slice s to GW g \\ 
	% 	\multicolumn{2}{l}{\textbf{Parameters}}\\
	% 	$F_{c}$        & packets with SF = c  \\ 
	% 	$BW_{s,g}$     & bandwidth assigned for slice s over GW g\\
	% 	$P^{Tx}_{g}$       & transmission power of GW g \\
	% 	\multicolumn{2}{l}{\textbf{Constants}}\\
	% 	$i_{d,s}$      & association index of device d to slice s \\ 
	% 	$i_{d,g}$      & association index of device d to GW g \\
	% 	$w_{d}$        & urgency factor for device d \\
	% 	$w_{s} $       & priority of slice s \\
	% 	$w_{r}$        & weight of reliability \\
	% 	$w_{ld} $      & weight of load \\
	% 	\multicolumn{2}{l}{\textbf{Metrics}}\\
	% 	$DR_{d,s,g}$   & data rate achieved by a device d \\
	% 	$SINR_{i,j}$   & SINR with SF=i and SF=j\\ 
	% 	$G^{tx}_{d,g}$ & power gain between a GW g and a device d \\ 
	% 	$S^{rx}_{d,s,g}$   & Receiver sensitivity\\
	% 	$RTD_{d} $     & instant packet delay for device d \\
	% 	$PLR_{d}$      & packet loss rate of device d \\\\
	% 	\red{$U_{d,s,g}$}  & \red{utility for device d in slice s on GW g} \\ 
	% 	\end{tabular}
	% }{
	% 	\Figure{h}{.85}{slice}{Slicing}
	% }
 % \end{frame}

\begin{frame}{Notations}{Related work}
	\Itemize{
		\item \textbf{G = \{1, ... , G\}:}  Set of gateways
		\item \textbf{S = \{1, ... , S\}:}  Set of slices
		\item \textbf{D = \{1, ... , D\}:} Set of devices
		\item $\mathbf{D_{s} = \{1, ... , D_{s}\} \in D :}$ Cluster of devices in slice s
		\item $\mathbf{F_{d,s,g} = \{1, ... , F_{d,s,g}\} :}$ Virtual flow for device d in slice s through GW g
	}

	\Itemize{
		\item $\bf{i}_{\bf{d,s}}$      \in \{0,1\}  Association index of device d to slice s \\ 
		\item $\bf{i}_{\bf{d,g}}$      \in \{0,1\}  Association index of device d to GW g \\
	}


	\Itemize{
		\item $\bf{w}_{\bf{d}}$   \in [0,1]  Urgency factor for device d \\
		\item $\bf{w}_{\bf{s}} $  \in [0,1]  Priority of slice s \\
		\item $\bf{wr}$           \in [0,1]  Weight of the impact of reliability (SINR)\\
		\item $\bf{wld}$          \in [0,1]  Weight of the impact of load (congestion)\\
	}

	\Itemize{
		\item $\mathbf{DR_{d,s,g}}$    data rate achieved by a device d \\
		% \item $SINR_{i,j}$    SINR with SF=i and SF=j\\ 
		\item $\mathbf{G^{tx}_{d,g}}$  power gain between a GW g and a device d \\ 
		\item $\mathbf{S^{rx}_{d,s,g}}$   Receiver sensitivity\\
		\item $\mathbf{RTD_{d}}$      instant packet delay for device d \\
		\item $\mathbf{PLR_{d}}$       packet loss rate of device d \\
	}

	\Itemize{
		\item $\mathbf{U_{d,s,g}}$   \red{utility for device d in slice s on GW g} \\ 
	}
 \end{frame}

\begin{frame}{Constraints/Hypothesis}{Related work}
\Columns{.6}{.4}{
	\begin{equation}
		max \sum _ { d \in D } \sum _ { s \in S } i_{d,s} \cdot U_{d,g,s} ~~~~~~~~~~~, g \in G
	\end{equation}

	\begin{equation}
		\begin{array} { l l}
			C1 : \sum _ { s \in S } i_{d,s} &= 1 , \forall d \in D \\ \\
			C2 : \sum _ { d \in D } i_ {d,g} \cdot P^{tx}_{d,s,g } &\leqslant P^{tx~max}_{g} , \forall g \in G , \forall s \in S \\ \\
			C3 : \sum _ { d = 1 } ^ { N } i_ {d,s} \cdot i_{d,g} \cdot DR_{d,s,g} \cdot &\leq  BW _ { s , g } , \forall s \in S , \forall g \in G  \\ \\
		\end{array} 
	\end{equation}
}{
\Figure{h}{.85}{slice}{Slicing}
}
\end{frame}


\begin{frame}{3 applications -> 3 slices -> 3 utility functions}{\footcite{dawaliby_adaptive_2019}}
	\Columns{.6}{.4}{

		\begin{equation}
			\begin{array} { l }
				\sigma_{r} = SINR_{d,s,g}/SINR_{max} ~~~~~~~~~,  \in [0,1] \\\\\\

				% min~D  = \left( \frac {\sum_{d=1}^{D_{s} } \sum_{d^{\prime} = D_{s} +1}^{D_{s}+D_{s^{\prime}}} \left(u_{d}-u_{d^{\prime}} \right)} {D_{s} D_{s^{\prime}}}\right)^{1/2},\forall d \in D_{s},\forall d^{\prime }\in D_{s^ {\prime}}\\\\
				U_{HCC} = \delta_{r} \left(\sigma_{r} w_{r} + \sigma_{ld} w_{ld} \right) \quad  with \quad \delta_{r} \in \{ 0,1 \} \\\\
				U_{MCC} = \sigma_{r} w_{r} + \sigma_{ld} w_{ld} \\\\
				U_{LCC} = \sigma_{ld} w_{ld} \\\\
				U_{d,s,g} = U_{d,s,g}^{\prime}+U_{d,s,g}^{\prime\prime} \\\\\\
				E_{d,s,g} = \frac {p_{i}^{tx} + p_{i} ^ {rx}} {V+epa } \cdot d_{tx/rx}
			\end{array}
		\end{equation}
	}{
	\Figure{h}{.85}{slice}{Slicing}
	}
\end{frame}


\begin{frame}{3 slice orchestration algorithms}{Which slice for which application flow ?}
	\Itemize{
		\item ADS-load
		\item DS-load
		\item FS-load
	}
\end{frame}

% \begin{frame}{Utility Function}{Related work}
% 	\begin{equation}
% 		\begin{array} { l l}
% 			DR_{d,s,g} &=SF\cdot\frac{bw_{s,g}}{2^{SF}}\quad\text{bits}/s\\\\
% 			Rx_{d,s,g} &=\frac{Tx_{d,s,g}  . u_{d,s,g}^{rx}  . u_{d,s,g}^{tx}}{PL} \epsilon ,  ~~~~~~~ with ~ \epsilon \sim N (0, \sigma 2 ) \\\\
% 			\          &PL=L_{0}+10.n\cdot\log_{10}\left(\frac{d}{d_{0}}\right)\\\\
% 			SINR_{i,j} &=\frac{Rx_{i}}{\sigma^{2}+\sum_{n\in Pkt_{j}} Rx_{n}}\\\\
% 			\sigma_{r} &= \frac{SINR_{k,l,m}}{SINR_{max}}
% 		\end{array}
% 	\end{equation}
%  \end{frame}


\begin{frame}{1 Clustering algorithm: BIRCH}{Which slice for which device ?}
	
	\Itemize{
	\item [T:] max number of device per cluster, 
	\item [B:] maw number of childes per cluster.
	}

	\Itemize{
	\item [$t_{0}:$] number of clusters = number of devices;
	\item [$t_{i}:$] get D2 the set of closest devices to cluster D1
		\itemize{
			\item if D1+D2 < T -> merge 
			\item eif D2< B -> create sub-cluster D2 of D1	
		}
	}
	\begin{equation}
		CF : \left( D_{s} , L S , S S \right) = \left(D_{s} , \sum_{d=1}^{D_{s}} w_{d}, \sum_{d=1}^{D_{s}} w_{d}^{2} \right)
	\end{equation}
\end{frame}



\begin{frame}{Results}{related work}
	\Columns{.5}{.5}{
		\Figure{h}{1}{u1}{PLR}
	}{
		\Figure{h}{1}{u2}{Energy consumption}
	}
\end{frame}



\begin{frame}{Results}{related work}
	\Columns{.5}{.5}{
		\Figure{h}{1}{u3}{Unserved nodes}
	}{
		%\Figure{h}{1}{u2}{u2}
	}
\end{frame}



\begin{frame}{Results}{related work}
	\Figure{h}{1}{u4}{Jainâ€™s Fairness Index}
\end{frame}



\begin{frame}{Results}{related work}
	\Figure{h}{1}{u6}{PLR}
\end{frame}





% \begin{frame}{Utility Function}{Related work}
% 	\begin{tabular} { l | l l l l l l } \\
% 		\           & $SF_{7}$ & $SF_{B}$ & $SF_{9}$ & $SF_{10}$ & $SF_{11}$ & $SF_{12}$ \\
% 		$SF_ {7}$   & { - 6 }         & { 16 }          & { 18 }          & { 19 }           & { 19 }           & { 20 } \\
% 		$SF_{8}$    & { 24 }          & { - 6 }         & { 20 }          & { 22 }           & { 22 }           & { 22 } \\
% 		$SF_ {9}$   & { 27 }          & { 27 }          & { - 6 }         & { 23 }           & { 25 }           & { 25 } \\
% 		$SF_{10}$   & { 30 }          & { 30 }          & { 30 }          & { - 6 }          & { 26 }           & { 28 } \\
% 		$SF_ {11}$  & { 33 }          & { 33 }          & { 33 }          & { 33 }           & { - 6 }          & { 29 } \\
% 		$S F_{12}$  & { 36 }          & { 36 }          & { 36 }          & { 36 }           & { 36 }           & { - 6 }
% 	\end{tabular}
% \end{frame}
